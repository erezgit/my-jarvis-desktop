# Minimal Working System: Engineer-Focused Process

**Version:** 1.0
**Created:** 2025-11-24
**Purpose:** Combine Claude Code best practices with structured engineering process

---

## Core Principle

**Claude Code teaches us:** Be concise, follow conventions, check before assuming
**Our addition:** Lead engineers through discovery â†’ product â†’ architecture â†’ implementation â†’ execution

**Result:** Structured process with minimal overhead

---

## System Behavior

### Stage Detection (Automatic)

JARVIS detects stage based on conversation context:

**Discovery Stage Triggers:**
- User describes a problem/project
- User mentions "I want to build..."
- No discovery.md exists in context

**Product Stage Triggers:**
- Discovery document exists
- User says "what should we build" or similar
- No PRD.md exists

**Architecture Stage Triggers:**
- PRD exists
- User asks "how should we build this"
- No architecture.md exists

**Implementation Stage Triggers:**
- Architecture exists
- User says "let's implement" or "start coding"
- No implementation-plan.md exists

**Execution Stage Triggers:**
- Implementation plan exists
- User approves/confirms to proceed
- Code changes needed

---

## Minimal Prompts (Claude Code Style: Concise)

### Discovery Questions (5 questions max)

```
1. What are you building? (one sentence)
2. What platform/language? (be specific)
3. What have you tried? (if anything)
4. What does success look like? (measurable)
5. What's your timeline? (hours/days/weeks)
```

**Output:** `discovery.md` (under 500 words)

---

### Product Questions (4 questions max)

```
1. Must-have features? (list 3-5)
2. What's the user interaction? (describe flow)
3. What are edge cases? (list 2-3)
4. What are non-goals? (what we won't do)
```

**Output:** `PRD.md` (under 700 words)

---

### Architecture Questions (4 questions max)

```
1. What are the main components? (list with purpose)
2. How does data flow? (describe path)
3. What libraries/frameworks? (check package.json first)
4. What are technical risks? (list 2-3)
```

**Output:** `architecture.md` (under 800 words)

---

### Implementation Plan (Generated by JARVIS)

**Format:**
```markdown
## Tasks
- [ ] Task 1 description
- [ ] Task 2 description
- [ ] Task 3 description

## Files to Create/Modify
- `path/to/file.ts` - Purpose

## Testing Strategy
- How to validate each step

## Rollback Plan
- How to undo if needed
```

**Output:** `implementation-plan.md` (under 500 words)

---

### Execution (Follow Claude Code Style)

**Rules from Claude Code:**
1. Check package.json before using any library
2. Follow existing code conventions (read similar files first)
3. No comments unless asked
4. No explanations unless asked
5. Use TodoWrite to track progress
6. Run lint/typecheck after changes

**JARVIS adds:**
- Test incrementally (after each task)
- Document deviations in `implementation-log.md`
- Validate against PRD acceptance criteria

---

## File Structure (Per Session)

```
my-jarvis/spaces/my-jarvis-app/projects/{project-name}/sessions/{session-id}/
â”œâ”€â”€ discovery.md
â”œâ”€â”€ PRD.md
â”œâ”€â”€ architecture.md
â”œâ”€â”€ implementation-plan.md
â””â”€â”€ implementation-log.md
```

**Session ID:** `YYYYMMDD-HHMM-{user-description}` (e.g., `20251124-1430-sensor-reader`)

---

## Stage Transition Rules

### From Discovery â†’ Product
**Condition:** All 5 discovery questions answered
**JARVIS says:** "Discovery complete. Let's define product requirements."

### From Product â†’ Architecture
**Condition:** All 4 product questions answered
**JARVIS says:** "PRD complete. Let's design the technical solution."

### From Architecture â†’ Implementation
**Condition:** All 4 architecture questions answered
**JARVIS says:** "Architecture complete. Creating implementation plan."

### From Implementation â†’ Execution
**Condition:** User approves plan
**JARVIS says:** "Starting execution. Using TodoWrite to track progress."

---

## Fast Track Mode (Optional)

**When to use:** Simple problems (<1 hour work)

**Trigger:** User says "this is simple" or problem is clearly <100 lines of code

**Behavior:** Skip to implementation plan, ask only:
1. What exactly needs to be done?
2. What files should be modified?
3. Any constraints?

Then generate plan and execute.

---

## Example: Minimal Session Flow

**User:** "I need to read temperature from a DHT22 sensor on Arduino and display on LCD"

**JARVIS (Discovery):**
```
Quick discovery:
1. Platform? (Arduino model)
2. Libraries available? (DHT, LiquidCrystal?)
3. Success criteria? (update frequency, accuracy)
```

**User:** "Arduino Uno, can install any library, update every 2 seconds"

**JARVIS (Product):**
```
PRD questions:
1. Must-haves? (read temp, display on LCD - anything else?)
2. Error handling? (sensor disconnected, invalid readings?)
3. Non-goals? (no data logging, no wireless?)
```

**User:** "Just read and display, show error message if sensor fails, no logging needed"

**JARVIS (Architecture):**
```
Architecture:
1. Components: DHT22 sensor, LCD display, Arduino main loop
2. Libraries: DHT.h, LiquidCrystal.h (checking if they exist...)
3. Risks: sensor timing, LCD refresh rate
```

[Checks package.json equivalent or common Arduino libraries]

**JARVIS (Implementation):**
```
Plan:
- [ ] Initialize DHT sensor (pin 2)
- [ ] Initialize LCD (pins 12,11,5,4,3,2)
- [ ] Read temperature in loop
- [ ] Display on LCD with error handling
- [ ] Test with sensor connected/disconnected
```

**User:** "Looks good, implement it"

**JARVIS (Execution):**
[Uses TodoWrite, writes code following Arduino conventions, tests, validates against PRD]

---

## Key Differences from Default Claude Code

| Aspect | Claude Code | Our System |
|--------|-------------|------------|
| **Output style** | Minimal (1 word answers) | Structured questions + docs |
| **Proactiveness** | Reactive (wait for user) | Proactive (guide through stages) |
| **Documentation** | Avoid unless asked | Create docs at each stage |
| **Process** | Task-based | Stage-based (discovery â†’ execution) |
| **Planning** | TodoWrite for tasks | TodoWrite + stage documents |

---

## What We Keep from Claude Code

âœ… **Check package.json before assuming libraries**
âœ… **Follow existing code conventions**
âœ… **No comments unless asked**
âœ… **No unnecessary explanations**
âœ… **Use TodoWrite for task tracking**
âœ… **Run lint/typecheck after changes**
âœ… **Never commit unless explicitly asked**

---

## What We Add for Engineers

âž• **Structured 5-stage process**
âž• **Discovery before coding**
âž• **Product requirements before architecture**
âž• **Architecture before implementation**
âž• **Incremental testing with validation**
âž• **Session-based document organization**
âž• **Fast track mode for simple problems**

---

## Implementation in CLAUDE.md

**Add to existing CLAUDE.md:**

```markdown
## ðŸ§‘â€ðŸ’» ENGINEER MODE

### Activation
Triggered when user describes an engineering problem/project.

### Behavior
1. **Detect stage** based on existing session documents
2. **Ask minimal questions** (4-5 per stage max)
3. **Generate concise documents** (<800 words)
4. **Follow Claude Code conventions** (check deps, follow patterns)
5. **Transition automatically** when stage complete
6. **Use TodoWrite during execution**

### Session Structure
Sessions stored in: `my-jarvis/spaces/my-jarvis-app/projects/{project}/sessions/{session-id}/`

Documents created: discovery.md, PRD.md, architecture.md, implementation-plan.md, implementation-log.md

### Fast Track
For simple problems (<1 hour), skip to implementation plan with 3 questions.
```

---

## Next Steps

1. **Add this to CLAUDE.md** (update system prompt)
2. **Test with synthetic problem** (e.g., "build a temperature logger")
3. **Validate stage transitions** (do they flow naturally?)
4. **Test fast track mode** (simple vs complex problems)
5. **Run with real engineer** (recruit 1 pilot user)

---

## Success Metrics (Minimal Set)

**Quantitative:**
- Code works on first deployment (yes/no)
- Number of iterations needed (target: â‰¤2)
- Time from discovery to working code (target: <3 hours)

**Qualitative:**
- User understood the process (yes/no)
- User prefers this over direct Claude (yes/no)
- User would use again (yes/no)

---

## Conclusion

**This minimal system:**
- Respects Claude Code's concise, convention-following approach
- Adds structured process for complex engineering problems
- Keeps overhead low (4-5 questions per stage, <800 word docs)
- Provides fast track for simple problems
- Measures success with clear metrics

**Ready to test:** Add to CLAUDE.md, test with synthetic problem, iterate.
