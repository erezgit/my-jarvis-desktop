# טיקט #050: תמיכה בעברית ו-RTL (Right-to-Left)

## סטטוס
🎯 **תכנון** - ממתין ליישום

## תיאור הבעיה
האפליקציה My Jarvis Desktop כרגע תומכת רק בכיוון כתיבה LTR (Left-to-Right) באנגלית. עבור משתמשים דוברי עברית (כמו לילך), הממשק והטקסט אינם מוצגים באופן טבעי וקריא.

## דרישות עיקריות

### 1. כיוון טקסט בבאבלס (Bubbles) - עדיפות גבוהה ⭐
**בעיה נוכחית**: הטקסט בתוך בועות ההודעות (גם של המשתמש וגם של האייג'נט) מוצג מימין לשמאל, אבל הכיוון הכללי של הבועה נשאר LTR.

**פתרון מוצע**:
- הוספת תמיכה ב-`dir="rtl"` בתוך הבועות עצמן
- החלת `text-align: right` על תוכן הטקסט בעברית
- שמירה על מבנה ה-bubbles ברמה גבוהה כפי שהוא (לא לשנות את המיקום של user vs agent bubbles)

**קבצים מושפעים**:
- `app/components/messages/MessageComponents.tsx` - UserMessage, AssistantMessage
- `app/components/messages/MessageContainer.tsx` - בועות הודעות כלליות
- CSS: הוספת מחלקות RTL/LTR

### 2. היפוך פאנלים (Panel Layout Reversal) - עדיפות בינונית
**אופציונלי**: עבור חוויית שימוש מלאה בעברית

**פתרון מוצע**:
- במצב עברית: File Tree מימין ← Preview באמצע ← Chat משמאל
- במצב אנגלית: File Tree משמאל ← Preview באמצע ← Chat מימין (כמו היום)

**קבצים מושפעים**:
- `app/components/Layout/DesktopLayout.tsx` - סדר הפאנלים
- `app/contexts/SettingsContext.tsx` - הוספת הגדרת שפה/כיוון

### 3. הוספת Hebrew/RTL Mode להגדרות

**דרישות**:
- הוספת אופציה חדשה ל-`SettingsContext`:
  ```typescript
  interface AppSettings {
    theme: 'light' | 'dark';
    enterBehavior: 'send' | 'newline';
    workingDirectory: string;
    displayMode: 'jarvis' | 'developer';
    direction: 'ltr' | 'rtl';  // 🆕 חדש
    language: 'en' | 'he';      // 🆕 חדש
  }
  ```

- UI Toggle ב-GeneralSettings:
  - כפתור/בורר לבחירת שפה: English / עברית
  - שמירה ב-localStorage כמו שאר ההגדרות
  - החלה אוטומטית על כל הממשק

**קבצים מושפעים**:
- `app/contexts/SettingsContext.tsx`
- `app/contexts/SettingsContextTypes.ts`
- `app/components/settings/GeneralSettings.tsx`

## ארכיטקטורה טכנית

### שלב 1: תשתית הגדרות (Settings Infrastructure)
```typescript
// SettingsContext - הוספת direction ו-language
const [settings, setSettings] = useState<AppSettings>({
  theme: 'dark',
  enterBehavior: 'send',
  workingDirectory: '/Users/erezfern/Workspace/my-jarvis',
  displayMode: 'jarvis',
  direction: 'ltr',     // ברירת מחדל
  language: 'en'        // ברירת מחדל
});
```

### שלב 2: החלת RTL על בועות הודעות
```typescript
// MessageComponents.tsx
const UserMessage = ({ content, direction = 'ltr' }) => {
  return (
    <div
      dir={direction}
      className={`
        ${direction === 'rtl' ? 'text-right' : 'text-left'}
        bg-green-100 rounded-lg p-3
      `}
    >
      {content}
    </div>
  );
};
```

### שלב 3: (אופציונלי) היפוך פאנלים
```typescript
// DesktopLayout.tsx
const panelOrder = direction === 'rtl'
  ? ['chat', 'preview', 'fileTree']  // RTL: chat ← preview ← fileTree
  : ['fileTree', 'preview', 'chat']; // LTR: fileTree → preview → chat
```

## תוכנית יישום

### Phase 1: תשתית בסיסית (30 דקות)
- [x] יצירת טיקט #050
- [ ] הוספת `direction` ו-`language` ל-SettingsContext
- [ ] הוספת UI toggle ב-GeneralSettings
- [ ] בדיקת persistence ב-localStorage

### Phase 2: תמיכה ב-RTL בבועות (45 דקות)
- [ ] עדכון MessageComponents.tsx לתמיכה ב-dir prop
- [ ] הוספת CSS classes ל-RTL text alignment
- [ ] החלת direction על UserMessage
- [ ] החלת direction על AssistantMessage
- [ ] בדיקות ידניות עם טקסט בעברית

### Phase 3: (אופציונלי) היפוך פאנלים (30 דקות)
- [ ] עדכון DesktopLayout.tsx
- [ ] בדיקת תאימות עם react-resizable-panels
- [ ] בדיקות חזותיות במצבי RTL/LTR

### Phase 4: בדיקות ופוליש (15 דקות)
- [ ] בדיקת מעבר בין מצבים
- [ ] בדיקת persistence
- [ ] ולידציה עם לילך

## הערות טכניות

### מה לא משנים
- ✅ מבנה ה-DOM הכללי של האפליקציה נשאר זהה
- ✅ UnifiedMessageProcessor - ללא שינויים
- ✅ Claude SDK integration - ללא שינויים
- ✅ Voice message system - ללא שינויים

### מה כן משנים
- 🔄 כיוון הטקסט **בתוך** הבועות בלבד
- 🔄 (אופציונלי) סדר הפאנלים ברמת ה-layout
- 🔄 הוספת הגדרת שפה/כיוון ל-Settings

## קריטריונים להצלחה

### Must Have (חובה)
1. ✅ טקסט בעברית מוצג מימין לשמאל **בתוך הבועות**
2. ✅ Toggle בהגדרות לבחירת שפה/כיוון
3. ✅ ההגדרה נשמרת ב-localStorage
4. ✅ המעבר בין מצבים חלק וללא באגים

### Nice to Have (רצוי)
1. 🎯 היפוך פאנלים במצב RTL
2. 🎯 תמיכה בשפות RTL נוספות (ערבית, פרסית)
3. 🎯 אנימציות חלקות במעבר בין מצבים

## זמן משוער
- **Phase 1-2 (חובה)**: 75 דקות
- **Phase 3 (אופציונלי)**: +30 דקות
- **סה"כ**: 1.5-2 שעות

## תלויות
- אין תלויות חיצוניות
- משתמש בתשתית קיימת (SettingsContext, TailwindCSS)

## שיקולים נוספים
- **Accessibility**: וידוא ש-ARIA attributes תומכים ב-RTL
- **Fonts**: TailwindCSS system fonts תומכים בעברית מצוין
- **Input Fields**: וידוא שגם ChatInput תומך ב-RTL

---

**נוצר**: 2025-10-07
**עדכון אחרון**: 2025-10-07
**אחראי**: Erez Fern + Claude (Jarvis)
**משתמש יעד**: לילך (דוברת עברית)
